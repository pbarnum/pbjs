"use strict";!function(e){function t(){this.root.find("li.pbTree-subRoot").removeClass("pbTree-opened").addClass("pbTree-closed"),this.root.find("ul").hide()}function s(){this.root.find("li").each(function(){$(this).children().is("a")||($(this).addClass("pbTree-subRoot"),options._showAll?$(this).addClass("pbTree-opened"):($(this).children("ul").hide(),$(this).addClass("pbTree-closed")))}),options.showoccupied.enable&&this.root.find("li:has(a)").each(function(){$(this).css(options.showoccupied.style)})}function o(e){e.each(function(){$(this).toggleClass("pbTree-opened").toggleClass("pbTree-closed"),$(this).hasClass("pbTree-opened")?$(this).find("ul:first").show():$(this).find("ul:first").hide()})}function i(){return $("a.pbTree-current").length>0&&this.root.is(":visible")?{top:parseInt($("a.pbTree-current").position().top+this.root.position().top+nodes.root.scrollTop()),width:nodes.root[0].scrollWidth}:{top:parseInt($("a.pbTree-current").position().top+nodes.root.scrollTop()),width:nodes.root[0].scrollWidth,display:"none"}}function r(e){var t,s,o;pbjs.undefined;if(pbjs.isConstructor(e,d)&&e.element.childNodes.length>0)for(t=e.element.childNodes,o=0;o<t.length;++o)s=new d(e,t[o],pbjs.undefined),"ul"===s.element.tagName&&r(s),e.addChild(s)}function n(){this.root.element=pbjs.undefined;var e,t=this.container.childNodes;for(e=0;e<t.length;++e)if("ul"==t[e].tagName){this.root.element=t[e];break}return this.root.element===pbjs.undefined?!1:void r(this.root)}function l(){var e={};return this.options.tooltip.enabled?pbjs.isModuleLoaded("tooltip")?e.tooltip=pbjs.getModule(this.IDs.IDS.TOOLTIP):e.tooltip=document.getElementById(this.IDs.IDS.TOOLTIP)||pbjs.createElement("div",{id:this.IDs.IDS.TOOLTIP}):e.tooltip=pbjs.undefined,this.options.highlighter.enabled?pbjs.isModuleLoaded("highlighter")?e.highlighter=pbjs.getModule(this.IDs.IDS.HIGHLIGHTER):e.highlighter=document.getElementById(this.IDs.IDS.HIGHLIGHTER)||pbjs.createElement("div",{id:this.IDs.IDS.HIGHLIGHTER}):e.highlighter=pbjs.undefined,this.options.selected.enabled?e.selected=document.getElementById(this.IDs.IDS.SELECTED)||pbjs.createElement("div",{id:this.IDs.IDS.SELECTED}):e.selected=pbjs.undefined,this.options.expandCollapse.enabled?e.expandCollapse=document.getElementById(this.IDs.IDS.EXPANDCOLLAPSE)||pbjs.createElement("div",{id:this.IDs.IDS.EXPANDCOLLAPSE}):e.expandCollapse=pbjs.undefined,this.options.search.enabled?pbjs.isModuleLoaded("search")?e.search=pbjs.getModule(this.IDs.IDS.SEARCH):(e.search=document.getElementById(this.IDs.IDS.SEARCH)||pbjs.createElement("input",{id:this.IDs.IDS.SEARCH,type:"text",placeholder:"Search..."}),pbjs.isConstructor(options.search.selector,String)&&parseInt(options.search.selector.length)>0&&_extrasSearchTree()):e.search=pbjs.undefined,e}var h="trees";if(!e||!e.pbjs)throw new Error("PBJS does not exist!");if(pbjs.trees&&pbjs.trees.constructor===Object)return pbjs.trees.createTree(id,options);var d;d=function(e,t,s,o){this.id=pbjs.salt(),this.parent=this.validateParent(e),this.element=pbjs.undefined,pbjs.isDOMElement(t)&&(this.element=t),this.label=s,this.children=pbjs.undefined,pbjs.isConstructor(this.children,Array)&&(this.children=o)},d.prototype={validateParent:function(e){return pbjs.isConstructor(e,d)?e:pbjs.undefined},getParent:function(){return this.parent},setParent:function(e){this.parent=this.validateParent(e)},hasChildren:function(){return pbjs.isConstructor(this.children,Array)&&this.children.length>0},pushChildNode:function(e){this.children=pbjs.isConstructor(this.children,Array)?this.children:[],this.children.push(e)},popChildNode:function(){return pbjs.isConstructor(this.children,Array)&&this.children.length>0?this.children.pop():pbjs.undefined}},pbjs.trees=function(e){return e&&pbjs.trees.hasTree(e)?pbjs.trees.getTree(e):void(pbjs.trees.length=0)},pbjs.trees.prototype.getAllTrees=function(){return pbjs.trees.container},pbjs.trees.prototype.isTree=function(e){return pbjs.isConstructor(pbjs.trees.leaves[e],pbjs.trees.tree)},pbjs.trees.prototype.createTree=pbjs.trees.tree=function(t,r){return this.container=document.getElementById(t),pbjs.isDOMElement(this.container)||pbjs.error(h,"Could not initiate a new Tree object with the given Id",t),this.id=t,this.root={},this.IDs={ID:{TOOLTIP:"pbjs-tooltip",HIGHLIGHTER:"pbjs-highlighter",SELECTED:"pbjs-tree-selected",SEARCH:"pbjs-tree-search",EXPANDCOLLAPSE:"pbjs-tree-expandcollapse"}},n(),this.extras=l(),s(),this.root.find("a").each(function(){$(this).click(function(){$("a.pbTree-current").length>0&&$("a.pbTree-current").removeClass("pbTree-current").removeAttr("style"),r.showoccupied.enable&&$(this).css(r.showoccupied.style),$(this).addClass("pbTree-current"),r.select.enable&&this._objects.selected.show().css(i())})}),this.root.click(function(e){if(this.root.has(e.target).length>0&&$(e.target).hasClass("pbTree-subRoot")||e.target){var t=$(e.target);t.hasClass("pbTree-opened")?(o(t),r.select.enable&&t.find("a.pbTree-current").length>0&&this._objects.selected.hide()):(o(t),r.select.enable&&t.find("a.pbTree-current").length>0&&t.find("li.pbTree-closed").length<=0&&this._objects.selected.css(i()).show())}}).mousemove(function(t){if(r.hover.enable&&this.root.has(t.target).length>0&&($(t.target).is("li")||$(t.target).is("a"))&&(this._objects.highlighter.show().css({top:$(t.target).position().top+this.root.position().top+nodes.root.scrollTop(),width:nodes.root[0].scrollWidth}),r.tooltip.enable)){var s=$(t.target).text().split("\n")[0];this._objects.tooltip.text(s).css({top:t.clientY+$(e).scrollTop()-r.tooltip.offsetY-this._objects.tooltip.outerHeight()+"px",left:t.clientX-r.tooltip.offsetX+"px"}).show()}}).mouseleave(function(){r.hover.enable&&r.tooltip.enable&&(this._objects.highlighter.hide(),this._objects.tooltip.hide())}),nodes.root.scroll(function(){r.select.enable&&$("a.pbTree-current").length>0&&$("a.pbTree-current").parents("li.pbTree-closed").length<=0&&this._objects.selected.css(i()).show(),r.ecButtons.enable&&this._objects.expandCollapse.css({bottom:-nodes.root.scrollTop(),left:nodes.root.scrollLeft()})}),this.root.show(),this},pbjs.trees.tree.findNode=function(e,s){var o=$("#"+e);return o.length>0?(s&&"boolean"==typeof s||(s=!0),s&&t(),$("a.pbTree-current").length>0&&$("a.pbTree-current").removeClass("pbTree-current"),o.parentsUntil("ul.pbTree-root").show().addClass("pbTree-opened"),o.children("a").addClass("pbTree-current").trigger("click"),options.select.enable&&this._objects.selected.hide().css(i()).show(),this):!1},pbjs.trees.tree.prototype.showAllNodes=function(){var e=0;pbjs.trees.treeWalkRecursive(this,function(t){t.isVisible||(++e,t.setVisibility(!0))}),this.options.select.enable&&this._objects.selected.setPosition()}}(window);